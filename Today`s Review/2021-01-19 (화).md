

###### 1. 학습 날짜

- 2021 - 01 - 19(화)

---

###### 2. 학습시간

- 10:00 ~ 18:00

---

###### 3. 학습 범위 및 주제

- 필로소퍼

---

###### 4. 동료 학습 방법 

- daelee, taelee, jehong, mihykim

---

###### 5. 학습 목표 

- 필로소퍼 과제

---

###### 6. 상세 학습 내용

- 코드작성시간 :  시간

뮤텍스

https://cesl.tistory.com/entry/Mutex와-Semaphore-구현하여-비교

- 공유자원, 즉 동시에 접근되는 자원에서 문제가 발생하지 않도록 독점을 보장해줘야하는 영역
- 한 순간에 하나의 프로세스만 진입해야하는 영역.
- 임계영역 동시접근 해결법으로 락, 세마포어, 모니터 등이 있음.

## 예제

https://bitsoul.tistory.com/172

# 뮤텍스

- MUTual Exclusion ⇒ 상호배제이다.
- 임계영역을 가진 쓰레드를 겹치지 않게, 단독으로 실행되게 하는 기법이다.

### **mutex**

Mutual Exclusion의 약자로 상호배제라고 합니다. 특정 스레드에서 단독으로 들어가야 되는 코드 영역에서 동기화를 위해 사용합니다.

이 문제에서는 하나의 포크를 두명의 철학자가 공유하게 되므로, 누군가 해당 포크를 사용하고 있을 때 다른 철학자가 접근하지 못하게 막는 용도로 사용합니다. 이때 사용중인 포크에 접근하여 mutex에 걸리게 되면 포크가 사용 가능한 상태가 될 때까지 스레드는 블럭됩니다.

### **int pthread_mutex_init(pthread_mutex_t *mutex, const pthread_mutex_attr \*attr)**

mutex는 여러개의 스레드가 공유하는 데이터를 보호하기 위해 사용하는 도구 보호하고자 하는 데이터를 다루는 코드 영역을 한번에 하나의 스레드만 실행가능 하도록 하는 방법으로 공유되는 데이터를 보호함 이러한 영역을 critical section이라고 함

**parameter**

- pthread_mutex_t *mutex
  - 초기화 할 mutex 객체
- const pthread_mutex_attr *attr
  - mutex의 특성을 변경
  - 기본 값을 사용하기 위해서는 NULL사용

**return value**

성공시 0 반환 실패 시 -1을 반환하며 errno설정됨

### **int pthread_mutex_destroy(pthread_mutex_t \*mutex)**

인자로 주어지는 mutex객체 mutex를 제거하기 위해 사용됨 pthread_mutex_t *mutex는 pthread_mutex_init함수를 이용해 생성된 mutex객체 반드시 unlock상태여야 함

### **int pthread_mutex_lock(pthread_mutex_t \*mutex)**

critical section에 들어가기 위해 mutex lock을 요청 만약 이미 다른 스레드에서 mutex lock을 얻어서 사용하고 있다면 다른 스레드에서 mutex lock을 해제할 때까지 블럭됨

모든 작업을 마치고 mutex lock이 더 이상 필요 없다면 pthread_mutex_unlock을 호춯해서 mutex lock을 돌려줘야 함

### **int pthread_mutex_unlock(pthread_mutex_t \*mutex)**

critical section에서의 모든 작업을 마치고 mutex lock을 돌려주기 위해 사용함

임계영역에 해당하는 부분을 뮤텍스_락으로 걸고

임계영역이 끝나고 언락을 하면 대기중이던 쓰레드가 해당 임계영역으로 진입한다.

한 쓰레드가 임계영역에 들어가기 전 락을 걸면 다른 쓰레드가 해당 영역에 진입할 수 없고, 임계영역에서 벗어난 쓰레드가 락을 풀면 다른 쓰레드가 해당 영역에 진입하며 락을 검 ⇒ 한번에 하나의 쓰레드만 동작가능 ⇒ 뮤텍스

---

###### 7. 학습 내용에 대한 개인적인 총평

- 상호배제를 구현하는 뮤텍스의 예제와 개념에 대해 학습

###### 8. 다음 학습 계획

- 필로소퍼