###### 1. 학습 날짜

- 2021-04-13 (화)

---

###### 2. 학습시간

- 10:00 ~ 18:00

---

###### 3. 학습 범위 및 주제

- ps, thread

---

###### 4. 동료 학습 방법 

- sooyoon, chlim

---

###### 5. 학습 목표 

- 둘 간의 차이 학습

---

###### 6. 상세 학습 내용

- 코드작성시간 :  시간

### 프로세스, 쓰레드 차이

---

운영체제가 시스템 자원을 어떤 방식으로 할당하고 실제 프로그램은 이 자원을 어떤 방식으로 활용하여 작동되는지까지 알고 있어야 함.

프로세스 - 설명, 독립된 영역,  IPC, 1개당 1개 이상 쓰레드

스레드 - 설명, 공유영역, 문제점, 멀티스레드 (문맥교환, 장,단점) , 동기화문제, 임계영역, 세마포, 모니터



##### code

- 프로세스가 실행할 코드가 기계어로 저장

##### data

- 코드에 선언한 전역, static 변수 등이 저장

##### stack

- 함수안에 선언된 지역변수, 매개변수, 리턴값 등이 저장되고 함수 호출시 기록, 종료시 제거

##### heap

- 프로그래머가 필요시 사용하는 메모리영역, 위 3가지와 달리 런타임에 결정됨
- 사용 후 반드시 해제

### 프로세스란

운영체제로부터 메모리자원을 할당받아 실행되고 있는 프로그램

각각 독립된 메모리 영역(코드, 데이터, 스택, 힙의 구조)를 할당받는다.

독립되었기에 프로세스는 다른 프로세스의 변수에 접근할 수 없음.



##### 할당받는 자원

- 주소공간
- code, data, stack, heap 구조로 되어있는 독립된 메모리영역



기본적으로 프로세스당 최소 1개의 스레드를 갖고있다.

한 프로세스가 다른 프로세스의 자원에 접근하기 위해선 IPC(inter process communication)을 사용해야한다.



#### 멀티프로세스

여러 CPU를 사용해 여러 프로세스를 동시에 수행



---



### 쓰레드

프로세스가 할당받은 자원을 이용하는 실행단위

쓰레드는 프로세스 내에서 각각 스택만 따로 할당받고 code, Data, Heap 영역은 공유한다.

프로세스 내 쓰레드들은 프로세스의 주소공간, 자원들을 공유하면서 실행된다.

즉, 스택을 제외한 공유자원은 서로 읽고 쓸 수 있음.

메모리 영역 내용을 공유하기에 어떤 쓰레드에서 오류가 발생하면 다른 쓰레드가 모두 강제로 종료된다.



#### 멀티스레드

하나의 프로세스 내에서 둘 이상의 쓰레드가 동시에 작업을 수행하는 것

하나의 프로그램에서 동시에 여러개 일을 수행할 수 있도록 해주는 것.

쓰레드 문맥교환은 프로세스보다 빠르기에 작업시간이 단축

그러나 자원을 공유하기에 "동기화 문제"가 발생할 수 있음

##### 동기화문제 ?

- 멀티쓰레드 또는 프로세스 등 방법에서 공유자원에 접근하는 경우에 그의 순서를 조절하는 것을 동기화(Synchronization)이라고 함.
- 이를 제어해주지 않으면 데이터 신뢰성을 보장할 수 없음(은행 예제)



##### 임계구역

둘 이상의 쓰레드가 동시에 접근해서는 안되는 공유자원에 접근하는 코드의 일부

하나가 자원에 접근 후 수정한 다음 다음 하나가 접근해야하는데 문제가 발생할 수 있음

문제 해결하기 위한 조건 3가지

Critical section 해결 방법

1. Mutual Exclusion : critical section에 하나가 들어가있다면 다른 건 접근 불가능 하다

2. Progress : critical section에 진입하려는 프로세스가 존재한다면, 그 중에서 한 프로세스는 critical section에 진입할 수 있어야 한다.

3. Bounded Waiting : critical section에 진입할 때 걸리는 limit이 존재하여야 한다

+ 뮤텍스락, 세마포, 모니터 등이 있음.



### context switch

실행 상태인 프로세스가 입출력을 요청하는 경우

- A 프로세스가 I/O 시스템콜 발생 -> A의 상태(다음 수행할 명령어 위치, 프로세스 상태 등을 PCB에 저장)
- 준비상태에 있던 다른 B 프로세스가 CPU를 할당 받아 수행(PCB에서 B의 내용을 꺼내옴)
- A -> B에게 CPU제어권이 이양되는 것을 문맥교환이라고 함



PCB에 저장하고 꺼내오는 과정을 문맥교환이라고 함.

- 프로세스가 만들어질 때마다 하나씩 만들어짐
- 커널메모리에 존재
- PID, 실행중인지 상태를 저장, PC, 레지스터의 값, 프로세스의 정보들을 저장

##### 출처

- [멀티쓰레딩, 프로세스 차이](https://goodgid.github.io/What-is-Multi-Thread/)
- [멀티스레드, 단일스레드 장, 단점](https://byeongmoo.tistory.com/2)
- [프로세스, 쓰레드 차이](https://velog.io/@raejoonee/%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EC%99%80-%EC%8A%A4%EB%A0%88%EB%93%9C%EC%9D%98-%EC%B0%A8%EC%9D%B4)

- [문맥교환](https://velog.io/@adam2/2020-01-08-2301-%EC%9E%91%EC%84%B1%EB%90%A8-huk55f3cic)

- [멀티프로세스, 멀티스레드](

---

###### 7. 학습 내용에 대한 개인적인 총평

- 계속 복습할 것

###### 8. 다음 학습 계획

- 