

###### 1. 학습 날짜

- 2021 - 03 - 17(수)

---

###### 2. 학습시간

- 10:00 ~ 18:00

---

###### 3. 학습 범위 및 주제

- 호이스팅

---

###### 4. 동료 학습 방법 

- daelee, taelee, jehong, mihykim

---

###### 5. 학습 목표 

- 호이스팅 정리

---

###### 6. 상세 학습 내용

- 코드작성시간 :  시간

### 호이스팅

브라우저가 JS를 해석할 때 **호이스팅** 대상이되는 코드가 위치에 관계없이 유효범위 == {} 상단으로 끌어올려지는 것

코드 실행 전, 선언을 컨텍스트에 저장한 다음 코드가 실행되는 것.

선언코드보다 초기화등의 코드가 먼저 작성되어도 동작하는 것.

변수선언이 함수선언보다 호이스팅 우선순위가 높다.





대상

- 선언만을 호이스팅한다.

- var 변수
- 함수 선언문
- let, const는 호이스팅의 대상이지만 TDZ의 제한으로 초기화 전까지 해당 변수에 접근할 수 없다.
- class는 호이스팅의 대상이 아니다.



TDZ?

- 변수를 선언한 스코프 내에서만 영향을 미침. (내부 스코프에서만 영향)
- let는 블록스코프를 갖는다

- 스코프의 시작 지점부터 초기화 시작 지점까지의 구간을 TDZ(Temporal Dead Zone) 라고합니다.

변수는 3가지 단계를 거쳐 생성된다.

1. 선언단계 : 변수를 변수 객체에 등록. 이 변수 객체는 스코프가 참조하는 대상이 됨.
2. 초기화단계 : 변수 객체에 등록된 변수의 공간을 메모리에 확보. 변수는 undefined로 초기화됨.
3. 할당단계 : undefined로 초기화된 변수에 값을 할당.

let, const는 1,2단계가 분리되어 동작한다. 반면에

var는 1,2단계가 동시에 이루어져서 호이스팅되어 바로 메모리에 올라가기 때문에 선언이전에 변수에 접근해도 undefined가 되지만, let이나 const 그리고 함수표현식은 호이스팅되지않는다. 해당 스코프의 변수객체에 등록은 하지만, 메모리에 할당이 되지않아 참조에러가 발생한다.

```js
//let는 블록스코프를 갖는다

{
	let a = 1; //지역변수 
}
console.log(a); //참조에러


{
  var b = 1; // 전역변수 => 블록스코프가 없어 블록 밖으로 호이스팅
}
console.log(b); // 1



///
console.log(a); //레퍼런스에러가 발생한다.
let a = 1;
//


// TDZ 시작, 스코프의 시작 == 선언단계 시작
console.log(a); // 참조에러
console.log(b); // 참조에러
//TDZ 끝, 초기화 시작지점 전까지
let b; // 초기화단계 b = undefined;
let a = 1;// 초기화 및 할당단계


```

실행 전 변수를 메모리에 할당하는 var변수, 실행문에서 선언전 호출해도 이미 실행전에 메모리에 올라가게 되어 OK인 것

**let 키워드로 선언된 변수는 선언 단계와 초기화 단계가 분리되어 진행된다.** 즉, 스코프에 변수를 등록(선언단계)하지만 초기화 단계는 변수 선언문에 도달했을 때 이루어진다. 초기화 이전에 변수에 접근하려고 하면 참조 에러(ReferenceError)가 발생한다. 이는 변수가 아직 초기화되지 않았기 때문이다. 다시 말하면 변수를 위한 메모리 공간이 아직 확보되지 않았기 때문이다. 따라서 스코프의 시작 지점부터 초기화 시작 지점까지는 변수를 참조할 수 없다. 스코프의 시작 지점부터 초기화 시작 지점까지의 구간을 ‘일시적 사각지대(Temporal Dead Zone; TDZ)’라고 부른다. [출처](https://poiemaweb.com/es6-block-scope)





let는 호이스팅의 대상이다.

```js
let foo = 1; // 전역 변수

{
  console.log(foo); // ReferenceError: foo is not defined
  let foo = 2; // 지역 변수
}
```

블록스코프를 따르는 `foo`는 전역, 지역변수로 선언되어있다.

지역블록에서 선언전 TDZ에서 변수에 접근했기 때문에 참조에러가 발생되고 let 또한 호이스팅의 대상이라는 것을 확인할 수 있다. => 뭔말이지.

호이스팅이란 끌어올려짐이라하고, 모든 선언이 이에 대한 대상인데 let, const는 TDZ의 제한으로 인해 초기화이전 참조에서 에러가 나는것이 아닌가? 어떻게 위의 예제에서 호이스팅의 대상이라는 것을 확인할 수 있는 것인가?



**호이스팅**은 함수를 사용하기 전에 함수를 **선언**해야한다는 ~~절차적~~인 규칙을 무시하므로 코드구조를 엉성하게 만들 수 있기에 **함수 표현식을 권장**한다고 [에어비엔비 JS 스타일가이드](https://github.com/imacoolgirlyo/javascript#functions--declarations)에 언급되어있다고 한다.

추가로, **함수 표현식에서는 세미콜론을 사용, 선언에서는 ; 사용 X**



---

###### 7. 학습 내용에 대한 개인적인 총평

- 호이스팅은 단지 끌어올림이라고 이해하고 있었는데, 클래스를 제외한 모든 선언이 호이스팅의 대상이고 let, const는 var와 달리 TDZ의 제한으로 참조에러가 발생하게 됨.

###### 8. 다음 학습 계획

- Cors