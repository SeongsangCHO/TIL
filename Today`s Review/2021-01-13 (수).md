

###### 1. 학습 날짜

- 2021 - 01 - 13(수)

---

###### 2. 학습시간

- 10:00 ~ 18:00

---

###### 3. 학습 범위 및 주제

- 쿠버네티스

---

###### 4. 동료 학습 방법 

- daelee, taelee, jehong, mihykim

---

###### 5. 학습 목표 

- 쿠버네티스

---

###### 6. 상세 학습 내용

- 코드작성시간 :  시간

- 알파인에서 nginx 세팅하기 > https://whatisthenext.tistory.com/123

  죽은 프로세스를 자동으로 살려주는 수퍼바이저 > https://devlog.jwgo.kr/2016/11/07/how-to-use-supervisor-in-one-minute/

  리버스프록시

  https://www.runit.cloud/2020/01/nginx-reverse-proxy.html

  SSH 서버 구동하기 >  https://wiki.gentoo.org/wiki/SSH#Running_the_SSH_server

  SSH 설정 = > https://zetawiki.com/wiki/Supervisor_%2B_ssh_%2B_cron_알파인_도커_이미지_빌드

  openrc로 ssh데몬 돌려야함

  `rc default` > 디폴트설정

  `rc-service sshd start` > ssh 실행

  `ssh-keygen -A` > ssh 키 생성

  SSH 접속방법

  `ssh www@IP` , key 생성 후 비밀번호 입력 `www:root`  > root가 비밀번호.

  [리눅스 SSH 접속 방법 (SSH 프로토콜 연결 허용 설정하기) - JooTC](https://jootc.com/p/201808031462)

  - 안해도 됨

  user ⇒ nginx 프로세스가 실행되는 권한으로 디폴트가 www-data

  ⇒pid 에러를 막기위해 디폴트로 설정되있는 권한을 ww로 모두 변경해줌 ⇒ chown -r www:www

  # 에러

  nginx: [emerg] "location" directive is not allowed here in /etc/nginx/nginx.conf:32

  - nginx.conf파일의 로케이션. 즉 , '/'와 같은 문자는 http 블록안에 있어야한다.. 라는데 그렇게 있는데 왜 문제인지..

  ⇒ location이 서버블록에 없었음.. 바깥에 있었음

  nginx: [emerg] open() "/run/nginx/nginx.pid" failed (2: No such file or directory)

  ⇒ nginx를 돌리는 pid관련문제

  ⇒ 스타 44개 받은 것

  https://github.com/gliderlabs/docker-alpine/issues/185

  같은 답ㅈ ㅔ시

  ⇒ https://superuser.com/questions/1306656/cant-run-nginx-in-alpine-linux-docker

  403 에러..

  ⇒ tail -f /var/log/nginx/error.log로 에러 로그 확인할 수 있다.

  ⇒ [error] 10#10: *1 directory index of "/var/www/" is forbidden, client: 172.17.0.1, server: , request: "GET / HTTP/1.1", host: "localhost"

  ⇒ HTML파일이 없었음..

  ⇒ index.html 파일 COPY해서 넣으니 해결함

  nginx: [emerg] open() "/etc/nginx/mime.types" failed (2: No such file or directory) in /etc/nginx/nginx.conf:8

  ⇒ 찾을 수 없다는 에러; 근데 접속해서 보면 있음;;

  ⇒알파인 리눅스 nginx 설정법을 따라가야함.

  파드는 정상적으로 돌아가나 접속이 되지 않았던 이슈

  ⇒ metallb의 ip 어드레스 범위와 공유한 로드밸런서 ip가 제대로 지정되지 않았음.

  ⇒ 범위를 하나의 주소만으로 사용함.

---

###### 7. 학습 내용에 대한 개인적인 총평

- nginx 서버 구현

###### 8. 다음 학습 계획

- 쿠버네티스