

###### 1. 학습 날짜

- 2020 - 11 - 20(금)

---

###### 2. 학습시간

- 10:00 ~ 18:00

---

###### 3. 학습 범위 및 주제

- 모니터

---

###### 4. 동료 학습 방법 

- daelee, taelee, jehong, mihykim

---

###### 5. 학습 목표 

- 모니터 학습

---

###### 6. 상세 학습 내용

- 코드작성시간 :  시간

### 보충2.6 :fallen_leaf:  모니터  `daelee`

#### (1) 개념

##### ✅ 문제 1. 전통의 오엑스문제

- 모니터 구조는 모니터 안에 **항상** **하나의** 프로세스만이 활성화되도록 보장해준다?! (O / X)
- 모니터를 사용하면 프로그래머들이 동기화 제약조건을 직접 코딩하지 않아도 된다?! (O / X)



#### (2) 모니터 구조

모니터는 **공유 자원 + 공유 자원 접근함수**로 이루어져 있고, 2개의 큐를 가지고 있다. 각각 **mutual exclusion(상호배타) 큐, conditional synchronization(조건동기) 큐**이다.

- **상호배타 큐**는 공유 자원에 하나의 프로세스만 진입하도록 하기 위한 큐이다. 
- **조건동기 큐**는 이미 공유자원을 사용하고 있던 프로세스가 일시정지 되면서 대기하는 큐이다.

<br>

##### ✅ 문제 2-1. 모니터(1),(2),(3) 상태의 변화를 참고해 A, B 각각에 알맞은 함수를 적으세요.

![monitor 구조](https://user-images.githubusercontent.com/37580034/98468603-8de6ab80-221e-11eb-9f8d-2c305dfb24a4.png)



<br>

##### ✅ 문제 2-2. 보기를 참고해 빈칸을 채워주세요.

```html
보기 : Signal and wait, Signal 보내, Signal and continue, 찌릿찌릿찌릿찌릿, 난너를원해
```

- `___(a)___` 기법을 사용한 모니터(3) 상황에서, 프로세스P는 프로세스Q가 모니터를 떠날 때까지 기다리거나 또는 다른 조건을 기다린다.

- `___(b)___` 기법을 사용한 모니터(3) 상황에서, 프로세스Q는 프로세스P가 모니터를 떠날 때까지 기다리거나 또는 다른 조건을 기다린다.



<br>

#### (3) 세마포를 이용한 모니터 구현

##### ✅ 문제 3. 세마포를 이용해 모니터를 구현할 때는 `___ and ___` 기법을 사용한다.
> 힌트 : 문제2-2에 정답이 숨어있어요


<br>

#### (4) Monitor vs Semaphore(보충개념)

- **세마포는** **모니터**보다 낮은 수준(혹은 넓은 범위)의 개념이다. 세마포를 사용하여 모니터를 구현할 수 있기 때문이다. 세마포는 본질적으로 **카운터**일 뿐이다. 모니터는 이진 세마포다.
- 모니터는 **공중 화장실**과 같다. 
  - 한 번에 한 사람 만 입장 할 수 있기 때문이다. 다른 사람이 들어오지 못하도록 문을 잠그고 일을 본 다음 떠날 때 잠금을 해제한다.
- 세마포는 **자전거 대여소**와 같다. 
  - 자전거 대여소는 정해진 대수의 자전거를 가지고 있다. 자전거를 대여하려고하는데 자전거가 남아있는 경우 자전거를 탈 수 있다. 그렇지 않으면 기다려야한다. 
  - 누군가 자전거를 반환하면 그때 다른 사람이 자전거를 탈 수 있다. 
  - 자전거를 타던 사람은 자전거를 다른 사람에게 빌려줄 수 있다. 자전거 대여소는 자전거를 돌려받기만 하면 자전거를 반납하는 사람이 누구인지는 신경 쓰지 않기 때문이다.

출처 : [Semaphore vs. Monitors - what's the difference?](https://stackoverflow.com/questions/7335950/semaphore-vs-monitors-whats-the-difference)

#### 1. 개념

##### ✅ 문제 1. 전통의 오엑스문제

- 모니터 구조는 모니터 안에 **항상** **하나의** 프로세스만이 활성화되도록 보장해준다?! (O / X)
- 모니터를 사용하면 프로그래머들이 동기화 제약조건을 직접 코딩하지 않아도 된다?! (O / X)



#### 2. 모니터 구조

모니터는 **공유 자원 + 공유 자원 접근함수**로 이루어져 있고, 2개의 큐를 가지고 있다. 각각 **mutual exclusion(상호배타) 큐, conditional synchronization(조건동기) 큐**이다.

- **상호배타 큐**는 공유 자원에 하나의 프로세스만 진입하도록 하기 위한 큐이다. 
- **조건동기 큐**는 이미 공유자원을 사용하고 있던 프로세스가 일시정지 되면서 대기하는 큐이다.

<br>

##### ✅ 문제 2-1. 모니터(1),(2),(3) 상태의 변화를 참고해 A, B 각각에 알맞은 함수를 적으세요.

![monitor 구조](https://user-images.githubusercontent.com/37580034/98468603-8de6ab80-221e-11eb-9f8d-2c305dfb24a4.png)

> 정답 : A = wait(), B = signal()
>
> 모니터에서는 프로세스가 모니터 안에서 기다릴 수 있도록 `Condition Variable` 을 사용한다. 이 condition 변수는 `wait()` 와 `signal()` 연산에 의해서만 접근할 수 있다.
>
> `wait()`를 호출한 프로세스는 조건동기 큐로 들어가고, 공유자원을 사용하고 있는 다른 프로세스가 `signal()`을 호출해 줄 때까지 일시 중지된다.
>
> 참고로 자바는 모니터를 사용하는 대표적인 언어인데, 자바에서 공통자원에 접근하는 함수는 synchronized(), 블락시키는 함수는 wait(), 블락을 해제시키는 함수는 notify() 이다.

<br>

##### ✅ 문제 2-2. 보기를 참고해 빈칸을 채워주세요.

```html
보기 : Signal and wait, Signal 보내, Signal and continue, 찌릿찌릿찌릿찌릿, 난너를원해
```

- `___(a)___` 기법을 사용한 모니터(3) 상황에서, 프로세스P는 프로세스Q가 모니터를 떠날 때까지 기다리거나 또는 다른 조건을 기다린다.

- `___(b)___` 기법을 사용한 모니터(3) 상황에서, 프로세스Q는 프로세스P가 모니터를 떠날 때까지 기다리거나 또는 다른 조건을 기다린다.

> 정답 : a = Signal and wait, b = Signal and continue
>
> 두 기법의 절충안으로서, signal()을 호출한 즉시 P가 모니터를 떠나고 Q가 즉시 재개되도록 모니터를 구현할 수 있다. 

<br>

#### **3. 세마포를 이용한 모니터 구현**

##### ✅ 문제 3. 세마포를 이용해 모니터를 구현할 때는 `______` 기법을 사용한다.
> 힌트 : 문제2-2에 정답이 숨어있어요

> 정답 : Signal and wait 기법
>
> 1. 각 모니터마다 mutex라는 세마포가 정의되고 그 초기값은 1이다. 
> 2. 프로세스는 모니터로 들어가기전에 wait(mutex)를 실행하고 모니터를 나온 후에 signal(mutex)를실행 해야 한다.
> 3. **Signal and wait** 기법을 사용해 모니터를 구현한다.
> 4. signal()을 호출한 프로세스는 실행 재개되는 프로세스가 모니터를 떠날 때까지 기다려야하므로 next라는 세마포 큐가 추가로 필요하다. signaling 프로세스는 이 next 큐에서 대기한다.
> 5. next 세마포 큐에서 일시중지 된 프로세스를 카운트하기위해 next_count 라는 변수를 사용한다.
> 6. 이렇게 하면 모니터 안에서의 상호 배제를 보장할 수 있다.

<br>

#### **4. Monitor vs Semaphore(보충개념)**

- **세마포는** **모니터**보다 낮은 수준(혹은  범위)의 개념이다. 세마포를 사용하여 모니터를 구현할 수 있기 때문이다. 세마포는 본질적으로 **카운터**일 뿐이다. 모니터는 이진 세마포다.
- 모니터는 **공중 화장실**과 같다. 
  - 한 번에 한 사람 만 입장 할 수 있기 때문이다. 다른 사람이 들어오지 못하도록 문을 잠그고 일을 본 다음 떠날 때 잠금을 해제한다.
- 세마포는 **자전거 대여소**와 같다. 
  - 자전거 대여소는 정해진 대수의 자전거를 가지고 있다. 자전거를 대여하려고하는데 자전거가 남아있는 경우 자전거를 탈 수 있다. 그렇지 않으면 기다려야한다. 
  - 누군가 자전거를 반환하면 그때 다른 사람이 자전거를 탈 수 있다. 
  - 자전거를 타던 사람은 자전거를 다른 사람에게 빌려줄 수 있다. 자전거 대여소는 자전거를 돌려받기만 하면 자전거를 반납하는 사람이 누구인지는 신경 쓰지 않기 때문이다.

출처 : [Semaphore vs. Monitors - what's the difference?](

</div>
</details>
<br><br>

---

###### 7. 학습 내용에 대한 개인적인 총평

- 모니터에 대한 개념 학습

###### 8. 다음 학습 계획

- 디바운싱 쓰로틀링

