---
###### 1. 학습 날짜

- 2020 - 06 - 04(목)
 

---

###### 2. 학습시간

- 10:00 ~ 21:00(자가)

---

###### 3. 학습 범위 및 주제

- 스프링을 통한 CRUD구현

---

###### 4. 동료 학습 방법 

- slack (saji, yshin, Jiyang, Seongkim)

---

###### 5. 학습 목표 

- 스프링프레임워크를 사용해서 CRUD 개인 프로젝트를 진행한다.

---

###### 6. 상세 학습 내용

- 코드작성시간 :  7시간

## 스터디 커뮤니티 #00(개괄, 메인화면구성, Mapper테스트 완료)



####  커뮤니티 기능

§게시글을 작성할 수 있습니다.

§게시글을 수정할 수 있습니다.

§게시글을 삭제할 수 있습니다.

§게시글을 조회할 수 있습니다.

§조회를 제외한 나머지 행위는 로그인이 필요합니다.

§로그인을 하기 위해서 회원가입을 해야합니다.

§글은 20개씩 페이지네이션이 되어야 합니다.

§각 포스팅에는 댓글을 달 수 있습니다.

§포스팅에 좋아요를 누를 수 있습니다.

§게시글 조회할 때마다 조회수가 올라갑니다.

§게시글에 map이 포함됩니다.

§게시글 작성자는 map의 위치를 검색해서 마커를 찍을 수 있습니다.

§게시글 작성시 도시, 평일 오전 오후, 주말 오전 오후로 checkbox를 선택하여 태그이미지를 추가할 수 있습니다.



#### DB설계 

테이블

§테이블 이름은 소문자+언더바로 작성합니다.

- §게시판 (board_table)

  - § board_bno (게시판을 구분하는 PK)

  - § board_title (게시판의 제목)

- §게시글(post_table)

  - §post_bno (게시글 구분하는 PK ) INT

  - § post_title (게시글의 제목) VARCHAR 50
  - § post_content (게시글 내용) VARCHAR2 2000

  - § post_id (게시글 작성자 id) VARCHAR2 20
  - § post_view_count (게시글 조회수) INT
  - § post_like (게시글 좋아요 수) INT
  - § post_regdate (게시글 등록 날짜) DATE

  - § post_reg_update (게시글 수정 날짜) DATE
  - § post_board_bno (게시판 bno을 참조하는 외래키) INT

- §댓글 (reply_table)

  - §reply_post_bno(게시글의 bno을 참조하는 외래키)PK

  - § reply_content (댓글의 내용) VARCHAR2 300
  - § reply_regdate (댓글 작성날짜) DATE

- §위치 (location_table)
  - § location_post_bno (게시글 bno를 참조하는 외래키)
  - § location_lat (위도를 표시) FLOAT 10
  - § location_lng (경도를 표시) FLOAT 10
  - § location_city (도시를 표시) VARCHAR2 10

- §회원정보 (member_table)

  - § member_bno (회원을 구분하는 PK) INT

  - § member_id (회원 ID) VARCHAR2 20
  - § member_password (회원 비밀번호) VARCHAR2 20

  - § member_email (회원 이메일) VARCHAR2 40





### 관계도



![DB ERD](https://user-images.githubusercontent.com/55486644/83714988-4c4a4700-a667-11ea-8cde-0206bcd8d8ec.JPG)







20.06.04

### 스프링 구축



프로젝트이름 : study_community

서버환경 : tomcat 8.5

개발 툴 : spring toll suite 3.9.10

사용 라이브러리 : lombok, log4jdbc, spring-jdbc, spring-tx, spring-test, hikariCP, mybatis-spring, mybatis





### JDBC, DataSoruce 테스트



DatabaseConnection에서 Failed to load ApplicationContext에러 발생

- pom 버전 수정, Board, PostVO, Mapper 인터페이스 추가

- log4jdbc.log4j2.properties 파일 추가



### alias 설정

- WEB-INF/mybatisAlias/alias.xml에 반환받을 객체 패키지명을 단순화
- sessionFactory하위에 property 빈 등록



## PostMapper (테스트 및 구현완료)



List<PostVO> getList() - 구현 

- List로 PostVO객체를 받아오는 메소드
- PostMapper에서 select로 bno > 0 객체 반환



void insertSelectKey(PostVO postVO) - 구현

- 현재 insert된 bno를 알 수 있는 게시글 작성 메소드



PostVO getPost(int post_bno)  - 구현

- PostVO객체를 반환받는 게시글 상세보기 메소드



int delete(int post_bno) - 구현

- 게시글 삭제가 제대로 이루어졌는지를 반환 받는 삭제 메소드



int update(PostVO postVO) - 구현

- 게시글 수정이 제대로 이루어졌는지를 반환 받는 수정 메소드





### 템플릿 없이 직접 해보기



메인 페이지 구성

PostController에서 다뤄야할 페이지

- main
- getPost
- registerPost (getPost와 전신은 같고, 좋아요버튼 제거, 작성버튼)

MemberController

- login
- memberRegister



main.jsp

- nexon 폰트적용

- ```css
  @font-face
  { 
      src: url("font/NEXONLv1GothicRegular.ttf");
      font-family: 'nexonfont';
  }
  
  ```

- position는 기준점을 만들어준다.
  - relative는 현재 배치된 위치를 기준점으로 잡아준다.
  - relative의 하위에 속하는 태그들의 position:absoulte를 지정하면 상위 div위치를 기준점으로 잡아 이동할 수 있다.(header, header_right_down)









- bno의 역순으로 20개씩 출력한다.
  - 20개씩 출력하기 위해서 PageDTO, criteria 추가
  - criteria의 멤버에는 amount(몇개를 보여줄 것인지), PageNum 페이지 수를 선언
  - PageDTO객체의 생성자는 endPage, stratPage를 계산, next버튼, prev버튼의 bool타입 선언















## 에러

post_view_count, post_like가 insertSelectKey수행시 Null값으로 인식됐었음.

- ```
  ALTER TABLE post_table MODIFY (post_like DEFAULT 0);
  ALTER TABLE post_table MODIFY (post_view_count DEFAULT 0);
  ```

  디폴트값을 0으로 초기화







### 메인화면

![메인화면](https://user-images.githubusercontent.com/55486644/83758327-dcf74600-a6ac-11ea-918b-d83fbc393962.JPG)



---

###### 7. 학습 내용에 대한 개인적인 총평

- 스프링 설정 ~ 영속계층에서 CRUD를 구현하고 HTML,CSS를 이용해 페이지 구성을 진행했다.
- 페이지 설계를 하고 CSS Style을 이용해 구성하는데 많이 다뤄보지않아 생각대로 되지 않았다. 메인페이지부터 구성해서 기본적인 기능을 구현하고 회원가입, 로그인페이지는 간단하게 구성하고 스타일을 생성해봐야겠다.
- 5일은 비즈니스계층에서 CRUD를 마무리하고 메인페이지에 테이블 데이터를 출력하는데까지 진행할 것이다.
- 남는 시간은 DP 3문제를 풀었다.

###### 8. 다음 학습 계획

- 비즈니스계층에서의 CRUD 구현
- 백준문제
- 스프링 책 학습진행
- 자료정리
- 에러 체크 및 정리