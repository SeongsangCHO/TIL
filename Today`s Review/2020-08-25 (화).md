

###### 1. 학습 날짜

- 2020 - 08 - 25(화)

---

###### 2. 학습시간

- 10:00 ~ 18:00

---

###### 3. 학습 범위 및 주제

- HTTP 쿠키

---

###### 4. 동료 학습 방법 

- daelee, taelee, jehong, mihykim

---

###### 5. 학습 목표 

- 쿠키에 대해 학습하고 동료와 복습

---

###### 6. 상세 학습 내용

- 코드작성시간 :  시간

## HTTP 11장 쿠키



### 쿠키와 세션추적

쿠키는 웹 사이트의 사용자를 추적하는데 사용한다.

이용자가 사이트에 접속하면, 식별 정보를 첨부한 쿠키들을 포함하여 응답해 추적함.

![image](https://user-images.githubusercontent.com/55486644/91026066-38462e00-e635-11ea-9c96-1c2928dd2ff8.png)



a. 이용자가 루트페이지를 요청한다.

b. 서버는 해당 URL로 리다이렉트 시킨다.

c. 클라이언트는 리다이렉트 URL로 요청을 보낸다.

d. 서버는 두개의 `세션쿠키`를 기술하여 클라이언트는 다시 해당 쿠키를 첨부해 요청을 보냄.

e. 클라이언트는 요청받은 두개의 쿠키를 포함해 보냄

f. 서버가 쿠키 두개를 더줌

g. 네개의 쿠키를 전달

h. 서버는 콘텐츠를 보냄

아마존의 동작방식이다.

아마존은 `세션쿠키`를 이용해 사용자를 추적한다.

<br>



### 쿠키와 캐싱

쿠키정보를 캐싱하는 것은 주의해야한다.

개인정보를 남에게 노출시킬 수도 있기 때문이다.

캐시를 다루는 기본원칙은 다음과 같다.

#### 캐시되지 말아야 할 문서 표시

`Set-Cookie`헤더를 제외하고 캐시해도 되는 경우라면 `Cache-Control: no-cache="Set-Cookie"`를 기술해 표시한다.

+ 캐시를 해도되는문서에 `Cache-Control:public`를 표시하면 웹 대역폭을 절약할 수 있다.

<br>

#### Set-Cookie 헤더를 캐시 하는 것에 유의

응답이 `Set-Cookie`를 가진다면 본문은 캐시할 수 있지만, 이를 캐시하는 것은 주의해야한다.

같은 `Set-Cookie`를 여러 사용자에게 보내면 사용자추적에 실패할 것.

#### Cookie 헤더를 갖고 있는 요청 주의

`Set-Cookie`를 가진 응답에 대해 이미지는 캐시하지만 텍스트는 캐시하지 않는 캐시도 있다. 개인정보 같은 민감한 정보들 때문이다. 이보다 효율적인 방법은 캐시 이미지에 파기 시간인 0인 쿠키헤더를 설정해 매번 재검사를 하도록 하는 것이다.

<br>

### 쿠키, 보안 and 개인정보

쿠키를 안쓰고도 원격 DB에 개인 정보를 저장하고, 해당 데이터의 키 값만 쿠키에 설정하는 방식으로 예민한 데이터가 클-서버 사이에 오가는 것을 줄일 수 있다.

<br>

1998년도에 쿠키의 위험성이 과대평가 되어있다고 한 평가서가 작성되었다.

내용은 간략히 다음과 같다.

쿠키는 웹 서버가 사용자를 식별하려고 사용하는 작은 데이터 조각.

쿠키를 사용해 시스템의 취약부분을 손상시키거나 스누핑 하는 것은 근본적으로 있을 수 없다.

쿠키나 웹서버의 로그파일을 통해서 사용자의 브라우징 습관을 추적. 쿠키는 그것을 좀더 편하게 해줄 뿐.



<br>



문제 제출

### 11.6.8 - 11.6.10 쿠키(3)　`secho`

- 1번. 쿠키는 웹 사이트의 사용자를 추적하는데 사용한다. 다음은 amazon.com에 방문하는 과정을 나타낸다. 해당 그림에서 서버는 어떤 종류의 쿠키를 기술하여 응답했는가?

  ![image](https://user-images.githubusercontent.com/55486644/91026066-38462e00-e635-11ea-9c96-1c2928dd2ff8.png) 

  <br>

  2번. 쿠키정보를 캐싱하는 것은 주의해야할 사항이다.(O X)

  

  <br>

  

  3번. `몌`는 `Set-Cookie`헤더를 제외하고 다른 문서들은 캐시해도된다고 할 때 다음 빈칸에 적절한 옵션을 채우세요.

  Cache-Control : "_ _ - _ _ _ _ _" = "_ _ _ _ - _ _ _ _ _ _"

  <br>

  

  

  4번. 보기를 보고 알맞은 답을 작성하세요.

  `키, 디스크, 값, 클라우드, 원격DB, 캐시, 쿠킴, 쿠키`

  클라이언트 - 서버간 예민한 데이터가 오가는 것을 줄일 수 있다. 그 방법은 쿠키를 쓰지않는 것인데 개인정보를 `_____`에 저장하고 데이터의 `_____`값만  `____`에 설정하는 방식이다.

  <br>

  

  5번. 쿠키를 사용해 시스템의 취약부분을 손상시키거나 스누핑할 수 있다. (O / X)

  </div>

<details>
<summary> <b> :page_facing_up: 답지 </b>  </summary>
<div markdown="1">


1번. 쿠키는 웹 사이트의 사용자를 추적하는데 사용한다. 다음은 amazon.com에 방문하는 과정을 나타낸다. 해당 그림에서 서버는 어떤 종류의 쿠키를 기술하여 응답했는가?

![image](https://user-images.githubusercontent.com/55486644/91026066-38462e00-e635-11ea-9c96-1c2928dd2ff8.png) 

- 정답 : 세션 쿠키

<br>

2번. 쿠키정보를 캐싱하는 것은 주의해야할 사항이다.(O X)

- O - 개인정보를 남에게 노출시킬 수도 있기 때문.

3번. `몌`는 `Set-Cookie`헤더를 제외하고 다른 문서들은 캐시해도된다고 할 때 다음 빈칸에 적절한 옵션을 채우세요.

Cache-Control : "_ _ - _ _ _ _ _" = "_ _ _ _ - _ _ _ _ _ _"

- 정답 no-cache , Set-Cookie 
- 캐시를 해도되는문서에 `Cache-Control:public`를 표시하면 웹 대역폭을 절약할 수 있다고함.

4번. 보기를 보고 알맞은 답을 작성하세요.

`키, 디스크, 값, 클라우드, 원격DB, 캐시, 쿠킴, 쿠키`

클라이언트 - 서버간 예민한 데이터가 오가는 것을 줄일 수 있다. 그 방법은 쿠키를 쓰지않는 것인데 개인정보를 `_____`에 저장하고 데이터의 `_____`값만  `____`에 설정하는 방식이다.

- 정답: 원격 DB, 키, 쿠키

5번. 쿠키를 사용해 시스템의 취약부분을 손상시키거나 스누핑할 수 있다. (O / X)

- X 근본적으로 있을 수 없는 일임. 쿠키의 위험성이 과대평가 되었다고함.

</div>
</details>
<br>



---

###### 7. 학습 내용에 대한 개인적인 총평

- 쿠키에 대해서 자세히 알게 되었음.
- 세션쿠키는 expire와 max-age 옵션이 없다고 하는데, 표준문서를 찾아보니까 아마도 잘못된 번역인 것같음.
- 위의 예시에서 아마존은 세션쿠키가 아닌 지속쿠키라고 생각됨.

###### 8. 다음 학습 계획

- 프로그래머스, JS, 리액트

