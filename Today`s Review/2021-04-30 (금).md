###### 1. 학습 날짜

- 2021-04-30 (금)

---

###### 2. 학습시간

- 10:00 ~ 18:00

---

###### 3. 학습 범위 및 주제

- mysql, elelastic search

---

###### 4. 동료 학습 방법 

- sooyoon, chlim

---

###### 5. 학습 목표 

- 둘 간의 차이점

---

###### 6. 상세 학습 내용

- 코드작성시간 :  시간

# Q1. Elastic search의 키워드 검색과 RDBMS의 LIKE 검색의 차이

# A1.

자바로 개발된 오픈 소스 검색 엔진

inverted index 구조로 데이터를 저장해서 전문 검색시 (Full text search) RDBMS에 비해 뛰어난 성능을 보장한다. 데이터를 빠르게 검색함.

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/28005d30-d35f-4904-9fd2-ba071053bbfc/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/28005d30-d35f-4904-9fd2-ba071053bbfc/Untitled.png)

저장되어 있는 방식이 다름

Elastic search는 inverted index 구조로 데이터를 저장한다. 책의 색인과 같이 특정 단어가 출연하는 위치를 저장한다. 반면 RDBMS는 B tree와 유사한 인덱스를 사용한다.

### Elastic search의 키워드 검색과 RDBMS의 LIKE 검색의 차이

Elastic search의 키워드 검색은 document를 저장할 때 수행하는 알고리즘과 동일한 알고리즘으로 키워드를 분리한다. 랭킹 알고리즘을 통해서 가장 유사한 순서대로 결과를 나타낸다.

https://www.compose.com/articles/how-scoring-works-in-elasticsearch/#:~:text=Elasticsearch runs Lucene under the,) for multi-term queries.

RDBMS에서의 like 검색은 와일드 카드로 시작하지 않는 경우에만 인덱스를 사용하고 나머지 경우는 전체를 탐색하기 때문에 상대적으로 느리다.

성민 답 : Elastic search는 inverted index구조로 되어 있어서 단어를 검색할 시 단어의 위치를 알려줌, 빠르다

RDBMS LIKE: 와일드카드로 시작시 전체 검색 - 느리다

인덱스를 사용하더라도 Full text search에 적합하지 않아서 느림

------

### Elastic search의 장점과 단점

오픈소스

빅데이터를 빠르게 찾을 수 있다

단점

join할 수 없다, 한번에 많은 양의 정보를 알기 어렵다

트렌젝션을 사용하지 않음

------

### MySql의 index들

B tree index : 한 칼럼 안에서 비슷한 형식의 데이터 중에서 원하는 데이터를 찾는 경우 사용하는 것이 일반적이다.

위도, 경도, 나이 등등

Full text index : 한 칼럼 안에서 많은 형태의 데이터가 답겨 있어서 효율적으로 데이터를 찾는 경우 사용하는 것이 일반적이다.

"오늘 delicious한 음식을 먹었다" 처럼 긴 내용을 검색할 때 사용된다.

### Full text index의 데이터를 인덱싱하는 방법

Stop word parser

토큰을 나눌 때 해당하는 stop word가 나타났을 때 기준으로 토큰을 나눈다.

ex) " " 공백

그럼 공백 기준으로 단어를 나누게 됨

N gram parser

토큰의 크기 n 만큼 데이터를 파싱해서 사용한다.

오늘, "늘 ", de, el, li, ic, io, ou, us, s한, "한 " , " 음" ...

여기서 토큰 크기가 2가 아닌 "늘 " 이런 것들은 제거되고 남은 토큰만 인덱싱

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1168f651-91da-4c36-909f-60564a84debe/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1168f651-91da-4c36-909f-60564a84debe/Untitled.png)

검색어 바이트가 많아질 수록, 쿼리 실행 시간이 stop word parser가 더 느리다.

저장 데이터 바이트 수가 많아질 수록 n gram parse가 더 무거워진다.

```cpp
SELECT * FROM "테이블명" WHERE MATCH("검색할컬럼명"[, ...]) AGAINST('"검색할키워드식" "검색모드");
```

------

MySql에 있는 Full text search를 사용하지 않고 Elastic search를 쓰는 이유

- 검색에 더 최적화 되어 있다.
- 단어 뿐만 아니라 옵션 태그 같은 검색도 용이

---

###### 7. 학습 내용에 대한 개인적인 총평

-  inverted(거꾸로) 데이터를 저장하는 방식이 특이하네요. RDBMS는 어떤 데이터를 검색하기 위해서 모든 컬럼을 찾아봐야하지만 엘라스틱서치는 찾을 데이터들을 잘게 쪼개 저장해 어느 컬럼에 있는지 확인해서 전문검색시 성능이 좋다
- 과제를 하느라 학습에 많은 시간을 쏟지 못했다

###### 8. 다음 학습 계획

- WEB