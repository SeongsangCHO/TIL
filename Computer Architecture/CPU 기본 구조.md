# CPU 기본 구성 및 명령어 셋







## 2.0 CPU의 기능



CPU는 기억장치에 저장된 프로그램 명령어들을 실행함으로써 프로그램 수행을 한다. 이를 위해 CPU가 수행하는 동작을 나열하면 다음과 같다.



1. 명령어 인출 : 기억장치로부터 명령어를 읽어옴
2. 명령어 해독 : 수행할 동작을 결정하기 위해 명령어 해독함
3. 데이터 인출 : 명령어 실행을 위해 데이터가 필요한 경우 기억장치 혹은 I/O장치로 부터 데이터를 읽어옴
4. 데이터 처리 : 데이터에 대한 산술, 논리연산을 수행함
5. 데이터 저장 : 수행한 결과를 저장함.



1, 2는 공통적으로 수행되나 3 ~ 5는 명령어에 따라 필요한 경우에만 수행.









## 2.1 CPU의 기본 구조



CPU는 산술논리연산장치 + 레지스터 세트 + 제어 유닛으로 구성된다.



## 1. 산술논리연산장치

- CPU 내부에서 산술 및 논리 연산을 수행하는 하드웨어 모듈



## 2. 레지스터 세트

- CPU 내부의 다양한 레지스터들의 집합

- CPU내부에서 처리되기 때문에 액세스 속도가 컴퓨터 기억장치들 중에서 가장 빠름

- CPU내의 한정된 영역에 넣어야 하기 때문에 제한적임

- 종류

  - 특수기능레지스터와 범용 레지스터로 나눠짐
  - 특수기능레지스터 
    - PC : 메모리의 주소정보를 가지며 증가하는 레지스터
    - AC : 메모리에서 데이터를 가져왔을 때 저장할지를 결정하는 레지스터
    - IR : 명령어를 가져왔을 때 그 위치를 결정하는 레지스터
    - MAR(메모리어드레스): 어드레스 정보를 갖고 있는 레지스터
    - MDR(메모리 데이터) : 데이터 정보를 갖고 있는 레지스터
  - 범용레지스터 : 메모리에서 CPU로 정보를 가져올 때 그 저장위치를 관리해주는 레지스터

  

## 2. 1CPU 내부 레지스터



### Program Count (PC)

- 다음에 인출할 명령어 주소 값을 가진 레지스터
- 명령어 인출된 후에 자동적으로 일정 크기(컴퓨터가 한번에 처리할 수 있는 크기)만큼 증가한다.
- 분기, 또는 조건 명령어가 실행되는 경우에는 JUMP와 같이 해당 명령어가 있는 주소값으로 갱신한다.



### Accumulator (AC)

- 처리할 데이터를 일시적으로 저장하는 레지스터
- CPU가 한번에 처리할 수 있는 데이터 비트수의 크기를 가진다.
- 연산 처리 후 결과를 어디에 저장할지를 결정한다.

### Instruction Register (IR)

- 가장 최근에 지정된 주소 번지의 주기억장치로부터 CPU로 인출된 명령어 코드가 저장되는 레지스터
- 메모리에 있는 명령어가 올때 IR로 가는 것

### Stackpointer Register (SP)

- 스택 시작번지 주소값을 가짐, 스택의 위치를 정해주는 레지스터
- 메모리에 설정된 스택의 시작번지의 주소값을 가지고 있으며, 스택에 정보가 쌓이거나 줄어드는 것에 따라 그 값이 ++, --하는 레지스터





MAR, MDR은 관문.. 이다! CPU내부버스는 외부버스와 직접연결되지 않으므로, 이를 임시적으로 담을 버퍼레지스터가 필요한데 이게 MAR, MDR인 것

### Memory Address Register (MAR)

- CPU가 메모리한테 주는 정보는 메모리에 있는걸 갖고와야해서 항상 주소값을 가져와야함 그래서 메모리는 CPU에다가 주소값을 요구하지 않기 때문에 단방향임
- 다음번에 인출될 주소 정보는 PC에 있고, 현재 CPU 내부로 불러올(가져올) 명령어 주소값을 메모리에 전달하기 전에 그것을 일시적으로 저장하는 레지스터

### Memory Data Register (MDR)

- 주기억장치로부터 읽혀질 , 혹은 쓰여질 데이터를 일시적으로 저장하는 레지스터

## 3. 제어 유닛

CPU의 두뇌.

- 명령어의 연산코드(Op-code)를 해석하고 그것을 실행하기 위한 제어 신호들을 순차적으로 발생시키는 하드웨어 모듈
- 명령어 실행에 필요한 각 정보들의 전송 통로, 방향을 지정
- CPU 내부 요소들과 시스템 구성 요소들의 동작시간도 결정해줌



## 4. CPU 내부 버스



- 데이터, 제어 신호들의 전송 통로
- ALU, 레지스터들 간의 데이터 이동을 위한 선, 제어 유닛의 제어신호를 전송하는 선들로 구성된다.
- 외부 시스템 버스와 직접 연결되지 않고 간접적으로 버퍼 레지스터, 인터페이스 회로를 통해 시스템 버스와 접속됨. (CPU 내부 처리 속도와 외부 처리속도 차이 때문에 직접 연결하면 안됨.)





## 내부구조



![](https://images.velog.io/images/secho/post/56f382f4-05ba-48d3-9d81-001bda2a7ba9/image.png)

CPU에 들어가고, 나가고 하는 부분 MAR, MDR

MAR에서 연결된 건 Address Bus인데 단방향이다

MDR은 Data Bus는 양방향으로 이동한다 (Bi direction)



### 

### 시스템 버스



CPU가 처리한 데이터들이 메모리에 저장되거나 출력되기 위해서 데이터들이 각 컴포넌트끼리 통신이 가능해야하는데 이를 가능케해주는 것이 컴퓨터 버스라고 한다.

시스템 버스는 CPU와 메모리를 연결하는 버스이다.



시스템 버스는 컴퓨터 시스템의 교통 시스템이라고 생각하면 된다. 당신이 하드 디스크에 저장되어 있는 MP3 파일의 음악을 듣을려고 한다고 상상을 해보자.

 이때 MP3 파일 자체를 데이터라고 보면 된다. 이 데이터는 스피커를 통해 소리를 내기 위해서는 사운드 카드로 전송되어 아날로그 시그널로 변환 되어야 한다.

 여기서 MP3 파일이 위치한 하드 디스크와 사운드 카드가 주소 정보라고 생각하면 된다. 마지막 컨트롤 정보는 앞의 데이터와 주소 정보가 언제, 어디로 가야 하는지를 알려 준다. 

이 모든 것들이 컴퓨터의 두뇌인 CPU에 의해서 관리가 되지만, 실제 데이터를 전송하는것은 시스템 버스이다.







### 출처

- [시스템 버스](https://richong.tistory.com/92)